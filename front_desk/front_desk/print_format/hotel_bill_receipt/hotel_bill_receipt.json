{
 "align_labels_right": 0,
 "creation": "2019-10-08 13:33:24.286831",
 "css": ".print-format { \n\tfont-size: 11px;\n}\n\n.table {\n    margin: 0px;\n}\n\n.borderless {\n\tborder:none;\n}",
 "custom_format": 1,
 "default_print_language": "en",
 "disabled": 0,
 "doc_type": "Hotel Bill",
 "docstatus": 0,
 "doctype": "Print Format",
 "font": "Default",
 "html": "    {% set reservation = frappe.get_doc(\"Reservation\", doc.reservation_id) %}\n    {% set company = frappe.get_doc(\"Global Defaults\").default_company %}\n    {% set customer = frappe.get_doc(\"Customer\", reservation.customer_id) %}\n    {% set folio = frappe.get_doc(\"Folio\", {\"reservation_id\": doc.reservation_id}) %}\n    {% set hotel_bill = frappe.get_doc(\"Hotel Bill\", {\"reservation_id\": doc.reservation_id}) %}\n    {% set accumulator = namespace(balance = 0.0) %}\n    {% set accumulator2 = namespace(charges = 0.0) %}\n    {% set accumulator3 = namespace(payment = 0.0) %}\n    {% set accumulator4 = namespace(refund = 0.0) %}\n\n    <div class=\"row\">\n        <div class=\"col-xs-6 text-left\">\n            <h1>{{company}}</h1>\n        </div>\n        <div class=\"col-xs-6 text-right\">\n            <h4>Tanda Terima Tagihan Hotel/<br/>Hotel Bill Receipt</h4>\n        </div>\n    </div>\n\n    <div class=\"row\">\n        <div class=\"col-xs-12 text-right\">\n            <b>Resepsionis/Receptionist: </b> {{ frappe.db.get_value(\"User\", frappe.user, \"full_name\") }}\n        </div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-xs-12\"><br><br></div>\n    </div>\n    <div class=\"row\">\n        <div class=\"col-xs-4\">\n            {{ customer.customer_name | upper }}\n            <br/>\n            {{ reservation.type }}\n            <br/>\n            {{ customer.primary_address }}\n        </div>\n        <div class=\"col-xs-8\">\n            <table class=\"table table-bordered\">\n                <tr>\n                    <th>Reservation</th>\n                    <th>Folio</th>\n                </tr>\n                <tr>\n                    <td>{{reservation.name}}</td>\n                    <td>{{folio.name}}</td>\n                </tr>\n            </table>\n        </div>\n    </div>\n\n    <div class=\"row\"><div class=\"col-xs-12\"><br/></div></div>\n\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <table class=\"table table-bordered\">\n                <tr>\n                    <th class=\"col-xs-2\">Date</th>\n                    <th class=\"col-xs-4\">Description/Remark</th>\n                    <th class=\"col-xs-2\">Charges</th>\n                    <th class=\"col-xs-2\">Payment</th>\n                    <th class=\"col-xs-2\">Balance</th>\n                </tr>\n                {%- for row in folio.transaction_detail -%}\n                <tr>\n                    <td>{{row.creation.strftime('%d-%m-%Y')}}</td>\n                    <td>{{row.remark}}</td>\n                    {% if row.flag == 'Credit' %}\n                    {% set accumulator.balance = accumulator.balance + row.amount_after_tax %}\n                    {% set accumulator3.payment = accumulator3.payment + row.amount_after_tax %}\n                    <td class = \"text-center\">-</td>\n                    <td class = \"text-right\">Rp.{{row.get_formatted('amount_after_tax')}}</td>\n                    <td class = \"text-right\">{{ \"Rp. {:,.2f}\".format(accumulator.balance) }}</td>\n                            \n                    {% elif row.flag == 'Debit' %}\n                    {% set accumulator.balance = accumulator.balance - row.amount_after_tax %}\n                    {% set accumulator2.charges = accumulator2.charges + row.amount_after_tax %}\n                    <td class = \"text-right\">Rp.{{row.get_formatted('amount_after_tax')}}</td>\n                    <td class = \"text-center\">-</td>\n                    <td class = \"text-right\">{{ \"Rp. {:,.2f}\".format(accumulator.balance) }}</td>\n                    {% endif %}\t\t\n                </tr>\n                {%- endfor -%}\n                {%- for row in hotel_bill.bill_payments -%}\n                <tr>\n                    {% set accumulator.balance = accumulator.balance + row.payment_amount %}\n                    {% set accumulator3.payment = accumulator3.payment + row.payment_amount %}\n                    <td>{{row.creation.strftime('%d-%m-%Y')}}</td>\n                    <td>{{row.mode_of_payment}} payment of Bill {{hotel_bill.name}}</td>\n                    <td class = \"text-center\">-</td>\n                    <td class = \"text-right\">Rp.{{row.get_formatted('payment_amount')}}</td>\n                    <td class = \"text-right\">{{ \"Rp. {:,.2f}\".format(accumulator.balance) }}</td>\n                </tr>\n                {%- endfor -%}\n                {%- for row in hotel_bill.bill_refund -%}\n                <tr>\n                    {% set accumulator.balance = accumulator.balance - row.refund_amount %}\n                    {% set accumulator2.charges = accumulator2.charges + row.refund_amount %}\n                    {% set accumulator4.refund = accumulator4.refund + row.refund_amount %}\n                    <td>{{row.creation.strftime('%d-%m-%Y')}}</td>\n                    <td>{{row.refund_description}}</td>\n                    <td class = \"text-right\">Rp.{{row.get_formatted('refund_amount')}}</td>\n                    <td class = \"text-center\">-</td>\t\t\t\t\n                    <td class = \"text-right\">{{ \"Rp. {:,.2f}\".format(accumulator.balance) }}</td>\t\n                </tr>\n                {%- endfor -%}\n                {% if hotel_bill.bill_rounded_change_amount > 0 %}\n                <tr>\n                    {% set accumulator.balance = accumulator.balance - hotel_bill.bill_rounded_change_amount %}\n                    {% set accumulator2.charges = accumulator2.charges + hotel_bill.bill_rounded_change_amount %}\n                    <td>{{hotel_bill.modified.strftime('%d-%m-%Y')}}</td>\n                    <td>Change from Cash payment of Bill {{hotel_bill.name}}</td>\n                    <td class = \"text-right\">Rp.{{hotel_bill.get_formatted('bill_rounded_change_amount')}}</td>\n                    <td class = \"text-center\">-</td>\n                    <td class = \"text-right\">{{ \"Rp. {:,.2f}\".format(accumulator.balance) }}</td>\n                </tr>\n                {% endif %}\n                {% if hotel_bill.round_down_change == 1 and hotel_bill.bill_change_round_amount > 0 %}\n                <tr>\n                    {% set accumulator.balance = accumulator.balance - hotel_bill.bill_change_round_amount %}\n                    {% set accumulator2.charges = accumulator2.charges + hotel_bill.bill_change_round_amount %}\n                    <td>{{hotel_bill.modified.strftime('%d-%m-%Y')}}</td>\n                    <td>Rounded down Change from Cash payment of Bill {{hotel_bill.name}}</td>\n                    <td class = \"text-right\">Rp.{{hotel_bill.get_formatted('bill_change_round_amount')}}</td>\n                    <td class = \"text-center\">-</td>\n                    <td class = \"text-right\">{{ \"Rp. {:,.2f}\".format(accumulator.balance) }}</td>\n                </tr>\n                {% endif %}\n            </table>\n            <table class = \"table table-bordered\">\n                <tr style=\"font-weight: bold\">\n                    <td class=\"col-xs-6 text-right\">Total</td>\n                    <td class=\"col-xs-2 text-right\">{{ \"Rp. {:,.2f}\".format(accumulator2.charges) }}</td>\n                    <td class=\"col-xs-2 text-right\">{{ \"Rp. {:,.2f}\".format(accumulator3.payment) }}</td>\n                    <td class=\"col-xs-2 text-right\">{{ \"Rp. {:,.2f}\".format(accumulator.balance) }}</td>\n                </tr>\n            </table>\n        </div>\n    </div>\n    <div style=\"margin-top:15px\"></div>\n    <div class=\"row\">\n        <div class=\"col-xs-12\">\n            <table class=\"table\">\n            <tr>\n                <td class=\"col-xs-6 text-right \" style=\"border-top:none;\">Total Charges:</td>\n                <td class=\"col-xs-2 text-right \" style=\"border-top:none;\">{{ \"Rp. {:,.2f}\".format(accumulator2.charges - accumulator4.refund) }}</td>\n                <td class=\"col-xs-2 text-right \" style=\"border-top:none;\"></td>\n                <td class=\"col-xs-2 text-right \" style=\"border-top:none;\"></td>\n            </tr>\n            <tr>\n                <td class=\"col-xs-6 text-right \" style=\"border-top:none;\">Total Payment: </td>\n                <td class=\"col-xs-2 text-right \" style=\"border-top:none;\"></td>\n                <td class=\"col-xs-2 text-right \" style=\"border-top:none;\">{{ \"Rp. {:,.2f}\".format(accumulator3.payment) }}</td>\n                <td class=\"col-xs-2 text-right \" style=\"border-top:none;\"></td>\n            </tr>\n            <tr>\n                <td class=\"col-xs-6 text-right\" style=\"border-top:1px solid #d1d8dd;\">Total Refund: </td>\n                <td class=\"col-xs-2 text-right\" style=\"border-top:1px solid #d1d8dd;\"></td>\n                <td class=\"col-xs-2 text-right\" style=\"border-top:1px solid #d1d8dd;\"></td>\n                <td class=\"col-xs-2 text-right\" style=\"border-top:1px solid #d1d8dd;\">{{ \"Rp. {:,.2f}\".format(accumulator4.refund) }}</td>\n            </tr>\n        </table>\n        </div>\n    </div>\n\n\t<div style=\"margin-top:155px\"></div>\n    <div class=\"row\">\n\t<div class=\"col-xs-3\"></div>\n\t<div class=\"col-xs-9\">\n\t<table class=\"table text-center\">\n\t\t<tr>\n\t\t\t<td class=\"col-xs-2\" style=\"border-top:none;\"><b>{{ customer.name }}</b></td>\n\t\t\t<td class=\"col-xs-1\" style=\"border-top:none;\"></td>\n\t\t\t<td class=\"col-xs-2\" style=\"border-top:none;\"><b>{{ frappe.db.get_value(\"User\", frappe.user, \"full_name\") }}</b></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style=\"border-top:1px solid #d1d8dd;\"><b>GUEST</b></td>\n\t\t\t<td style=\"border-top:none;\"></td>\n\t\t\t<td style=\"border-top:1px solid #d1d8dd;\"><b>CASHIER</b></td>\n\t\t</tr>\n\t</table>\n</div>\n\n\n\n",
 "idx": 0,
 "line_breaks": 0,
 "modified": "2019-10-16 14:31:34.491162",
 "modified_by": "Administrator",
 "module": "Front Desk",
 "name": "Hotel Bill Receipt",
 "owner": "Administrator",
 "print_format_builder": 0,
 "print_format_type": "Server",
 "show_section_headings": 0,
 "standard": "Yes"
}